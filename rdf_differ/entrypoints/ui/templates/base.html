{% extends "bootstrap/base.html" %}
{% set navigation_bar = [
    ('/', 'index', 'List of diffs'),
    ('/diffs', 'create_diff', 'Create Diff'),
] -%}

{% block title %}
    {% if title %}{{ title }} - Meaningfy{% else %}Welcome to Meaningfy{% endif %}
{% endblock %}

{% set active_page = active_page|default('index') -%}
{% block navbar %}
    <nav class="navbar navbar-expand-lg navbar-light bg-light" style="background-color: #DCDCDC">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="{{ url_for('index') }}">Meaningfy</a>
            </div>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="nav navbar-nav mr-auto">
                    {% for href, id, caption in navigation_bar %}
                        <li class="nav-item{% if id == active_page %} active{% endif %}">
                            <a class="nav-link" href="{{ url_for(id)|e }}">{{ caption|e }}</a>
                        </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </nav>
{% endblock %}

{% block content %}
    <div class="container">
        {% with errors = get_flashed_messages(category_filter=["error"]) %}
            {% if errors %}
                {% for message in errors %}
                    <div class="alert alert-danger" role="alert">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        {% with messages = get_flashed_messages(category_filter=["success"]) %}
            {% if messages %}
                {% for message in messages %}
                    <div class="alert alert-info" role="alert">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block app_content %}
        {% endblock %}
    </div>
    <footer class="footer">
        <br>
        <div class="container">
            <span class="text-muted">Powered by <a
                    href="https://github.com/meaningfy-ws">Meaningfy</a>.</span>
        </div>
    </footer>
{% endblock %}
